function initServer(){var e=getCookie("server_localtion");if(null!=e&&""!=e)for(var i=0;i<listServers.length;i++)if(listServers[i].id==e)return listServers[i].url;return"http://cdn.dungmori.com:8081/video"}function currentServerId(){var e=getCookie("server_localtion");if(null!=e&&""!=e)for(var i=0;i<listServers.length;i++)if(listServers[i].id==e)return listServers[i].id;return listServers[0].id}function initName(){var e=getCookie("video_quality"),i=link.rate;return null!=e&&""!=e&&e<i.length?i[e]:i[0]}function initQuality(){var e=getCookie("video_quality"),i=link.rate;return null!=e&&""!=e&&e<i.length?e:0}var videoPlayer=new Vue({el:".dmrx-player",data:{currentServer:initServer(),currentName:initName(),currentQuality:initQuality(),listServers:listServers,serverId:currentServerId(),lesson:lesson_lessonDetail,course:lesson_course},methods:{changeServerBySelectTag:function(){var e=this;setCookie("server_localtion",e.serverId,30),location.reload()},changeServerLocaltion:function(e){vm=this,console.log("cài server mặc định là : "+e),setCookie("server_localtion",e,30),location.reload()},onChangeQuality:function(){vm=this,console.log(vm.currentQuality),setCookie("video_quality",vm.currentQuality,30),location.reload(),vm.currentName=initName()},fastRewind:function(){player.currentTime(player.currentTime()-10),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&($(".left-fast-icon").css("display","inline"),setTimeout(function(){$(".left-fast-icon").css("display","none")},1200))},fastForward:function(){player.currentTime(player.currentTime()+10),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&($(".right-fast-icon").css("display","inline"),setTimeout(function(){$(".right-fast-icon").css("display","none")},1200))}},mounted:function(){vm=this;var e=window.innerWidth>0?window.innerWidth:screen.width;e<=768&&($(".select-localtion-select").css("display","block"),$(".server-item").css("display","none"))}}),options={playbackRates:[1,1.25,1.5,2],preload:"auto",controlBar:{volumeMenuButton:{vertical:!0,inline:!1,volumeBar:{vertical:!0},volumeLevel:!0}}},player=videojs("myplayer_"+playerId,options),serverLocaltion=1;getCookie("server_localtion")?serverLocaltion=getCookie("server_localtion"):setCookie("server_localtion",1,30),$.post(window.location.origin+"/khoa-hoc/get-video-token",{id:serverLocaltion},function(e,i){player.src({src:videoPlayer.currentServer+"/"+videoPlayer.currentName+"/playlist.m3u8?wmsAuthSign="+e,type:"application/x-mpegURL",withCredentials:!1})}),$(".movie-play").click(function(){if($(".movie-play").css("display","none"),$("#myplayer_"+playerId).css("display","block"),getCookie("current_time_"+lesson_lessonDetail.id)){var e=getCookie("current_time_"+lesson_lessonDetail.id);player.currentTime(e)}player.play(),setInterval(function(){setCookie("current_time_"+lesson_lessonDetail.id,player.currentTime(),10)},5e3)});